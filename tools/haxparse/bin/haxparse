#!/usr/bin/env perl
use v5.36;
use strict;
use warnings;

use FindBin qw($Bin);
use lib "$Bin/../lib";

use Hax::Lexer;
use Hax::Parser;

my $path = shift @ARGV or die "usage: haxparse FILE.hax\n";
open(my $fh, '<:encoding(UTF-8)', $path) or die "open $path: $!\n";
my $src = do { local $/; <$fh> };

my $lex = Hax::Lexer->new(file => $path, src => $src);
my $p   = Hax::Parser->new(lexer => $lex);

my $ast = $p->parse;

use Data::Dumper ();
local $Data::Dumper::Sortkeys = 1;
print Data::Dumper::Dumper($ast);
